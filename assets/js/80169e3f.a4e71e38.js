"use strict";(self.webpackChunkmicrosite=self.webpackChunkmicrosite||[]).push([[729],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>y});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(n),m=a,y=u["".concat(s,".").concat(m)]||u[m]||d[m]||o;return n?r.createElement(y,i(i({ref:t},p),{},{components:n})):r.createElement(y,i({ref:t},p))}));function y(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:a,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2866:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var r=n(7462),a=(n(7294),n(3905));const o={sidebar_position:11},i="Manage Keys",l={unversionedId:"how-tos/manage-keys",id:"how-tos/manage-keys",title:"Manage Keys",description:"To interact with other parties and contracts you need to import their public",source:"@site/docs/how-tos/manage-keys.md",sourceDirName:"how-tos",slug:"/how-tos/manage-keys",permalink:"/brambl-cli/docs/current/how-tos/manage-keys",draft:!1,tags:[],version:"current",sidebarPosition:11,frontMatter:{sidebar_position:11},sidebar:"tutorialSidebar",previous:{title:"Manage Contracts",permalink:"/brambl-cli/docs/current/how-tos/manage-contracts"},next:{title:"Create a Complex Transaction",permalink:"/brambl-cli/docs/current/how-tos/complex-tx"}},s={},c=[{value:"Export a base verification key",id:"export-a-base-verification-key",level:2},{value:"Import a base verification key",id:"import-a-base-verification-key",level:2},{value:"Sync the wallet",id:"sync-the-wallet",level:2}],p={toc:c},u="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"manage-keys"},"Manage Keys"),(0,a.kt)("p",null,"To interact with other parties and contracts you need to import their public\nkeys into your wallet. This allows to derive the right keys to derive the next\naddress where to send the funds."),(0,a.kt)("h2",{id:"export-a-base-verification-key"},"Export a base verification key"),(0,a.kt)("p",null,"To export a base verification key run the following command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"brambl-cli wallet export-vk -w $PASSWORD -o $OUTPUT_FILE --walletdb $WALLET --party-name $PARTY_NAME --contract-name $CONTRACT_NAME --keyfile $KEYFILE -n $NETWORK\n")),(0,a.kt)("p",null,"This will export the base verification key for the party ",(0,a.kt)("inlineCode",{parentName:"p"},"$PARTY_NAME")," and contract ",(0,a.kt)("inlineCode",{parentName:"p"},"$CONTRACT_NAME")," to the file ",(0,a.kt)("inlineCode",{parentName:"p"},"$OUTPUT_FILE"),". The keyfile ",(0,a.kt)("inlineCode",{parentName:"p"},"$KEYFILE")," is used to derive the exported key."),(0,a.kt)("p",null,"This command is also used to export a final verification key. To do this, use the ",(0,a.kt)("inlineCode",{parentName:"p"},"--state")," option to specify the\nstate from which to export the key."),(0,a.kt)("h2",{id:"import-a-base-verification-key"},"Import a base verification key"),(0,a.kt)("p",null,"To import one or many base verification keys run the following command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"brambl-cli wallet import-vks --input-vks $BASE_VK_1,$BASE_VK_2 --party-name $PARTY_NAME --contract-name $CONTRACT_NAME -n $NETWORK --walletdb $WALLET\n")),(0,a.kt)("h2",{id:"sync-the-wallet"},"Sync the wallet"),(0,a.kt)("p",null,"To sync the wallet run the following command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"brambl-cli wallet sync --contract-name $CONTRACT_NAME --party-name $PARTY_NAME --walletdb $WALLET -n $NETWORK -h $HOST --bifrost-port $PORT --keyfile $KEYFILE -w $PASSWORD\n")),(0,a.kt)("p",null,"This will sync the wallet for the party ",(0,a.kt)("inlineCode",{parentName:"p"},"$PARTY_NAME")," and contract ",(0,a.kt)("inlineCode",{parentName:"p"},"$CONTRACT_NAME")," with the bifrost node running on ",(0,a.kt)("inlineCode",{parentName:"p"},"$HOST")," on port ",(0,a.kt)("inlineCode",{parentName:"p"},"$PORT"),". The keyfile ",(0,a.kt)("inlineCode",{parentName:"p"},"$KEYFILE")," is used to derive keys. The password for the wallet is ",(0,a.kt)("inlineCode",{parentName:"p"},"$PASSWORD"),". "),(0,a.kt)("p",null,"The procedure for the sync is the following:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"we first derive the next address for the party and contract"),(0,a.kt)("li",{parentName:"ul"},"we query the node to see if the UTXOs in that address are spent"),(0,a.kt)("li",{parentName:"ul"},"if the UTXOs are spent, then we derive the next address and repeat the process")))}d.isMDXComponent=!0}}]);